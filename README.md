# 🎫 OwOTicket - 智能旅游票务平台

<div align="center">
**作者：甘大鹏 © 版权所有，侵权必究！**

_一个现代化的跨平台旅游票务解决方案_

</div>

---

## 📖 项目概述

### 🎯 项目简介

**OwOTicket** 是一个基于 uni-app + Vue 3 构建的现代化旅游票务平台，致力于为用户提供一站式的旅游服务体验。平台整合了门票预订、住宿安排、纪念品购买等核心功能，通过智能化的服务流程和用户友好的界面设计，实现从行程规划到售后保障的全链路数字化体验。

### 🚀 项目目标

- 🎪 **一站式服务平台**：整合门票+住宿+纪念品的完整旅游生态
- ⚡ **极速购票体验**：15 秒内完成核心购票流程的高效操作
- 🔄 **多端同步体验**：支持小程序、App、H5 多平台无缝切换
- 🧠 **智能推荐系统**：基于用户行为的个性化行程规划
- 🛡️ **安全可靠架构**：用户数据隔离与权限管控体系

### ✨ 项目特色

- 🎨 **现代化 UI 设计**：采用青绿色主题，简约而不失时尚
- 👥 **用户独立购物车**：每个账户拥有独立的购物车数据
- 🔐 **智能路由拦截**：基于权限的页面访问控制
- 📱 **响应式布局**：完美适配各种屏幕尺寸
- 🎭 **沉浸式体验**：丰富的动画效果和交互反馈
- 🛒 **简化购买流程**：优化的订单提交流程，减少用户操作步骤

## 🛠️ 技术架构

### 💻 技术栈

<div align="center">

| 分类           | 技术                | 版本  | 说明                    |
| -------------- | ------------------- | ----- | ----------------------- |
| **前端框架**   | Vue 3               | 3.x   | 组合式 API，响应式系统  |
| **跨平台框架** | uni-app             | 3.x   | 一套代码，多端发布      |
| **UI 组件**    | 自定义组件          | -     | 基于项目设计规范        |
| **状态管理**   | 本地存储 + API 集成 | -     | uni.storage + 后端同步  |
| **路由管理**   | uni-app 路由        | -     | 内置路由系统 + 权限拦截 |
| **构建工具**   | HBuilderX           | -     | 官方 IDE                |
| **开发语言**   | JavaScript          | ES6+  | 现代 JS 语法            |
| **样式预处理** | CSS3                | -     | 原生 CSS + Flexbox 布局 |
| **后端框架**   | Node.js + Express   | 18.x+ | RESTful API 服务        |
| **数据库**     | MySQL               | 8.0+  | 关系型数据库            |
| **网络请求**   | Fetch API           | -     | 原生网络请求            |
| **数据格式**   | JSON                | -     | 数据交换格式            |

</div>

### 🏗️ 项目结构

```
OwOTicket/
├── 📁 pages/                    # 页面目录
│   ├── 🏠 index/               # 首页模块
│   ├── 🎫 Ticketing/           # 门票列表页
│   ├── 🏨 Hotel/               # 住宿列表页
│   ├── 🎁 Souvenir/            # 纪念品列表页
│   ├── 📄 TicketDetails/       # 门票详情页
│   ├── 🏨 HotelDetails/        # 住宿详情页
│   ├── 🎁 SouvenirDetails/     # 纪念品详情页
│   ├── 🛒 myCart/              # 购物车页面
│   ├── 👤 mine/                # 个人中心
│   ├── 🔐 LoginPage/           # 登录注册页
│   ├── 🎮 ProjectDetails/      # 游乐项目详情
│   ├── ⚙️ managePage/          # 管理页面
│   ├── 📋 OrderPage/           # 订单管理页面
│   ├── 💳 PaymentPage/         # 支付确认页面
│   └── ✏️ EditProfile/         # 用户资料编辑页面
├── 📁 static/                   # 静态资源
│   ├── 🎨 css/                 # 样式文件
│   │   └── common.css          # 公共样式
│   ├── 📊 data/                # 数据文件
│   │   └── CommonData.js       # 公共数据模型
│   └── 🖼️ images/              # 图片资源
├── 📁 utils/                    # 工具函数
│   ├── 🛒 cartUtils.js         # 购物车工具类
│   ├── 🛒 cartService.js       # 购物车API服务
│   ├── 👤 userUtils.js         # 用户管理服务
│   ├── 📋 orderUtils.js        # 订单管理服务
│   ├── 🔧 common.js            # 通用工具函数
│   ├── 📷 chooseImage.js       # 图片选择工具
│   └── 🛡️ interceptor.js       # 路由拦截器
├── 📄 App.vue                   # 应用入口
├── 📄 main.js                   # 主入口文件
├── 📄 pages.json               # 页面配置
├── 📄 manifest.json            # 应用配置
└── 📄 uni.scss                 # 全局样式
```

## 🎯 功能模块详解

### 🏠 核心页面模块

#### 📱 首页模块 (`pages/index/`)

- **轮播图展示**：动态展示热门景点和活动
- **快捷导航**：门票、住宿、纪念品快速入口
- **推荐内容**：精选门票、酒店、纪念品展示
- **用户引导**：新用户友好的界面引导

#### 🎫 门票模块 (`pages/Ticketing/` + `pages/TicketDetails/`)

- **门票列表**：多种票型展示（单人票、家庭套餐、学生票、老年票）
- **游乐项目**：旋转木马、过山车、高空缆车、碰碰车等
- **详情页面**：门票详细信息、价格、使用说明
- **购买流程**：数量选择、时间预约、优惠券使用、协议确认

#### 🏨 住宿模块 (`pages/Hotel/` + `pages/HotelDetails/`)

- **住宿列表**：经济型、亲子型、豪华型多种房型
- **详情展示**：房间设施、入住须知、尊享服务、用户评价
- **预订功能**：一键预订，自动添加到购物车
- **Tab 切换**：设施介绍、入住规则、服务项目、用户评价

#### 🎁 纪念品模块 (`pages/Souvenir/` + `pages/SouvenirDetails/`)

- **商品展示**：纪念衫、抱枕、钥匙链、手机壳、水杯、笔记本
- **规格选择**：尺寸、颜色多规格选择
- **详情信息**：商品介绍、购买须知、用户评价
- **购买流程**：规格选择、数量确定、添加购物车

### 🛒 交易模块

#### 🛍️ 购物车系统 (`pages/myCart/` + `utils/cartUtils.js` + `utils/cartService.js`)

- **用户独立**：每个账户独立的购物车数据存储
- **API 集成**：优先使用后端 API，失败时自动回退到本地存储
- **分类管理**：门票、住宿、纪念品分类展示和管理
- **数量控制**：商品数量增减、删除操作，支持异步更新
- **批量操作**：全选、批量删除、批量结算功能
- **数据同步**：前后端数据实时同步，确保数据一致性
- **错误处理**：完善的网络异常处理和用户提示
- **ID 兼容**：支持本地 ID 和后端 card_id 双重标识符

#### � 订单管理系统 (`pages/OrderPage/` + `utils/orderUtils.js`)

- **三状态管理**：待付款、待消费、评价订单三个 Tab 分类
- **分页显示**：每页最多 5 条数据，支持页码导航 (< 1 2 3 >)
- **状态流转**：订单状态自动流转，支持 API 状态修改
- **操作功能**：
  - 待付款：立即付款、取消订单
  - 待消费：取消订单、确认消费
  - 评价订单：写评价、再次购买、删除订单
- **数据同步**：与后端 API 实时同步订单状态
- **智能跳转**：立即付款和再次购买自动跳转支付页面

#### 💳 支付确认系统 (`pages/PaymentPage/`)

- **默认收货信息**：预设收货人信息（小小新、19196966669、江西省南昌市南昌县天庭南天门）
- **支付方式选择**：微信 💬、支付宝 💰、银行卡 💳、QQ🐧 表情符号图标
- **号码保护功能**：可选择隐藏手机号中间位数
- **优惠券系统**：支持优惠券选择和折扣计算
- **表单验证**：完整的收货信息和支付金额验证
- **支付流程**：模拟支付过程，自动更新订单状态

#### ✏️ 用户资料编辑 (`pages/EditProfile/`)

- **头像管理**：支持拍照和相册选择，自动压缩优化
- **信息编辑**：用户名、手机号修改，账号只读保护
- **跨平台兼容**：H5 和原生环境的图片处理适配
- **数据验证**：实时表单验证和错误提示
- **API 同步**：编辑后自动同步到后端和本地存储

#### �👤 用户中心 (`pages/mine/`)

- **个人信息**：头像、昵称、会员天数、积分等
- **数据统计**：点赞数、优惠券、足迹记录
- **功能入口**：设置、关于我们、管理页面、订单管理
- **编辑功能**：🔧 编辑按钮快速跳转资料编辑页面
- **登录状态**：登录/退出功能

### 🔐 认证模块

#### 🔑 登录注册 (`pages/LoginPage/` + `utils/userUtils.js`)

- **双模式切换**：登录和注册模式无缝切换
- **表单验证**：账号、密码、手机号格式验证
- **API 集成**：用户认证、注册通过后端 API 处理
- **数据验证**：账号、手机号重复性检查
- **安全机制**：密码显示/隐藏切换，模拟验证码
- **用户协议**：注册时的协议确认机制
- **错误处理**：网络异常时的本地验证回退

#### 🛡️ 权限控制 (`utils/interceptor.js`)

- **路由拦截**：未登录用户访问受保护页面时跳转登录
- **白名单机制**：公开页面无需登录即可访问
- **权限验证**：基于 token 的用户身份验证
- **管理员权限**：基于 isAdmin 字段的管理员权限控制

### ⚙️ 管理模块

#### 🔧 管理页面 (`pages/managePage/` + `utils/userUtils.js`)

- **用户管理**：用户增删改查，支持 API 和本地存储双重操作
- **数据统计**：用户总数、管理员数量统计展示
- **权限控制**：仅管理员账户可访问，admin 账户权限保护
- **表单验证**：完整的用户信息验证，包括重复性检查
- **批量操作**：支持用户信息的批量管理
- **数据同步**：管理操作实时同步到后端 API
- **错误处理**：API 调用失败时的本地回退机制

### 🎮 娱乐模块

#### 🎪 游乐项目 (`pages/ProjectDetails/`)

- **项目展示**：各种游乐设施详细介绍
- **安全提示**：身高限制、注意事项
- **游玩指南**：最佳游玩时间、拍照技巧

## 📊 项目进程

### ✅ 已完成功能

- [x] **基础架构搭建**：uni-app + Vue 3 项目初始化
- [x] **页面路由配置**：tabBar 和普通页面路由设置
- [x] **UI 设计实现**：统一的设计风格和响应式布局
- [x] **首页模块**：轮播图、导航、推荐内容展示
- [x] **门票模块**：列表展示、详情页面、购买流程
- [x] **住宿模块**：房型展示、详情介绍、预订功能
- [x] **纪念品模块**：商品展示、规格选择、购买流程
- [x] **购物车系统**：用户独立购物车、API 集成、数据同步
- [x] **用户认证**：登录注册、API 集成、权限控制、路由拦截
- [x] **个人中心**：用户信息展示、功能入口
- [x] **管理系统**：用户管理、数据统计、权限控制
- [x] **数据模型**：完整的数据结构设计和 API 适配
- [x] **工具类库**：购物车工具、用户服务、通用函数、拦截器
- [x] **API 服务**：购物车 API、用户管理 API 封装
- [x] **错误处理**：网络异常处理、本地回退机制
- [x] **数据同步**：前后端数据一致性保障
- [x] **订单管理**：订单生成、状态跟踪、历史记录

### 📋 待开发功能

- [ ] **消息通知**：系统消息、订单状态通知
- [ ] **社交功能**：用户评价、分享、收藏
- [ ] **优惠系统**：优惠券、积分兑换、会员等级
- [ ] **客服系统**：在线客服、FAQ、帮助中心

## 🗄️ 数据模型

### 📊 核心数据结构

#### 🎫 门票数据模型 (`CommonTicketing`)

```javascript
{
  "id": "1",                    // 门票ID
  "name": "单人门票",           // 门票名称
  "img": "/static/images/...",  // 门票图片
  "price": "35",               // 价格
  "refer": "使用说明"           // 使用须知
}
```

#### 🏨 住宿数据模型 (`CommonHotel`)

```javascript
{
  "id": "1",                           // 住宿ID
  "name": "OwO旅社大床房",             // 房间名称
  "img": "/static/images/...",         // 房间图片
  "price": "168",                      // 价格
  "refer": "房间描述",                 // 简短描述
  "like": "856",                       // 点赞数
  "facilities": ["免费WiFi", "空调"],   // 设施列表
  "checkinRules": ["入住规则"],        // 入住须知
  "services": ["服务项目"],            // 服务列表
  "introduction": "详细介绍"           // 详细介绍
}
```

#### 🎁 纪念品数据模型 (`CommonSouvenir`)

```javascript
{
  "id": "1",                           // 商品ID
  "name": "OwO纪念衫",                 // 商品名称
  "img": "/static/images/...",         // 商品图片
  "size": ["S", "M", "L"],            // 尺寸选项
  "color": ["red", "blue"],           // 颜色选项
  "price": "59",                      // 价格
  "sale": "3238",                     // 销量
  "like": "1256",                     // 点赞数
  "introduction": "商品介绍",          // 详细介绍
  "buyingNotes": ["购买须知"],         // 购买须知
  "reviews": ["用户评价"]             // 用户评价
}
```

#### 👤 用户数据模型 (`userData`)

```javascript
{
  "id": "1",                          // 用户ID
  "name": "系统管理员",               // 用户姓名
  "account": "admin",                 // 登录账号
  "phone": "13800138000",            // 手机号
  "password": "123456",              // 密码
  "img": "/static/images/...",       // 头像
  "clubDays": 108,                   // 会员天数
  "points": 1256,                    // 积分
  "likes": 89,                       // 点赞数
  "coupons": 3,                      // 优惠券数量
  "footprints": 42,                  // 足迹数量
}
```

#### 🛒 购物车数据模型 (`cartData`)

**后端 API 数据格式**：

```javascript
{
  "Ticketing": [
    {
      "card_id": "15220",              // 商品唯一标识符
      "category": "Ticketing",         // 商品类别
      "type": "单人门票",              // 商品类型
      "img": "/static/images/ticket_01.png", // 商品图片
      "count": 1,                      // 商品数量
      "scheduledTime": "2025-06-19",   // 预定时间
      "model": null,                   // 商品规格（纪念品用）
      "price": "35.00"                 // 商品价格
    }
  ],
  "Hotel": [...],                      // 住宿商品数组
  "Souvenir": [...]                   // 纪念品数组
}
```

**本地存储兼容格式**：

```javascript
{
  "id": "local_id_123",               // 本地ID（兼容旧版本）
  "card_id": "15220",                 // 后端ID
  "category": "Ticketing",
  "type": "单人门票",
  "img": "/static/images/ticket_01.png",
  "count": 1,
  "scheduledTime": "2025-06-19",
  "model": null,
  "price": "35.00"
}
```

## 🔧 API 架构设计

### 📡 服务层架构

项目采用前后端分离架构，通过 RESTful API 进行数据交互：

#### 🛒 购物车服务 (`utils/cartService.js`)

```javascript
class CartService {
  // 获取用户购物车数据
  async getCart(account)

  // 添加商品到购物车
  async addToCart(account, item)

  // 更新购物车商品
  async updateCartItem(card_id, updates)

  // 删除购物车商品
  async removeFromCart(card_id)

  // 计算购物车总价
  calculateTotal(cartData)
}
```

#### 👤 用户服务 (`utils/userUtils.js`)

```javascript
class UserService {
  // 用户认证
  async loginUser(account, password)

  // 用户注册
  async registerUser(account, phone, password, name)

  // 创建用户
  async createUser(userData)

  // 更新用户信息
  async updateUser(userData)

  // 删除用户
  async deleteUser(account)

  // 获取所有用户
  async getAllUsers()
}
```

### 🔄 数据流设计

1. **优先级策略**：优先使用后端 API，失败时自动回退到本地存储
2. **数据同步**：本地存储作为缓存，定期与后端同步
3. **错误处理**：完善的异常处理和用户友好的错误提示
4. **兼容性**：支持新旧数据格式的无缝切换

## 🚀 快速开始

### 📋 环境要求

#### 前端开发环境

- **HBuilderX**: 3.0+ (推荐使用最新版本)
- **微信开发者工具**: 最新版本 (小程序开发)
- **Chrome 浏览器**: 最新版本 (H5 调试)

#### 后端开发环境 (可选)

- **Node.js**: 18.0+ (后端 API 服务)
- **MySQL**: 8.0+ (数据库服务)
- **npm/yarn**: 包管理工具

### 🛠️ 安装步骤

#### 前端项目启动

1. **克隆项目**

   ```bash
   git clone [项目地址]
   cd gandapeng/OwOTicket
   ```

2. **使用 HBuilderX 打开**

   - 打开 HBuilderX
   - 文件 → 打开目录 → 选择 `OwOTicket` 文件夹

3. **运行项目**
   - **H5 端**: 点击运行 → 运行到浏览器 → Chrome
   - **小程序**: 点击运行 → 运行到小程序模拟器 → 微信开发者工具
   - **App 端**: 点击运行 → 运行到手机或模拟器

#### 后端 API 配置 (可选)

4. **配置 API 服务**

   ```javascript
   // utils/cartService.js 和 utils/userUtils.js 中
   // 修改 baseUrl 为你的后端服务地址
   constructor(baseUrl = 'http://localhost:3000') {
     this.baseUrl = baseUrl;
   }
   ```

5. **离线模式**
   - 项目支持完全离线运行
   - 所有数据将存储在本地 uni.storage 中
   - API 调用失败时自动回退到本地存储

### 🔑 测试账号

| 账号类型 | 用户名  | 密码       | 说明           |
| -------- | ------- | ---------- | -------------- |
| 管理员   | `admin` | `123456`   | 系统管理员账户 |
| 普通用户 | `user`  | `12345678` | 测试用户账户   |

## ⭐ 项目亮点

### 🚀 技术特色

- **🔄 双重数据源架构**：API 优先 + 本地存储回退，确保应用在任何网络环境下都能正常运行
- **🆔 智能 ID 映射**：支持本地 ID 和后端 card_id 的无缝切换，保证数据兼容性
- **⚡ 异步优化**：全面采用 async/await，提供流畅的用户体验
- **🛡️ 完善错误处理**：多层次错误处理机制，用户友好的错误提示
- **📱 响应式设计**：使用 rpx 单位，完美适配各种屏幕尺寸
- **🔐 权限管控**：基于角色的权限控制，保护敏感功能和数据

### 💡 创新设计

- **🛒 智能购物车**：用户独立购物车，支持分类管理和批量操作
- **🔄 数据同步**：前后端数据实时同步，本地缓存提升性能
- **🎯 模块化架构**：清晰的代码结构，易于维护和扩展
- **🎨 统一设计语言**：青绿色主题，现代化 UI 设计
- **📊 数据可视化**：管理后台数据统计和用户行为分析

## 🎨 设计规范

### 🎨 色彩规范

| 用途         | 颜色值    | 说明                             |
| ------------ | --------- | -------------------------------- |
| **主色调**   | `#36cfc9` | 青绿色，用于导航栏、按钮、价格等 |
| **背景色**   | `#fbfbfb` | 浅灰色，页面主背景               |
| **卡片背景** | `#ffffff` | 白色，卡片和内容区域             |
| **文字主色** | `#333333` | 深灰色，主要文字                 |
| **文字副色** | `#666666` | 中灰色，次要文字                 |
| **边框色**   | `#e5e5e5` | 浅灰色，分割线和边框             |

### 📐 尺寸规范

- **圆角**: 统一使用 `10rpx` 或 `20rpx`
- **间距**: 基础间距 `20rpx`，大间距 `40rpx`
- **字体**: 主标题 `48rpx`，副标题 `32rpx`，正文 `28rpx`
- **按钮高度**: 标准按钮 `80rpx`，小按钮 `60rpx`

## 📱 平台支持

| 平台              | 支持状态    | 说明                 |
| ----------------- | ----------- | -------------------- |
| **H5**            | ✅ 完全支持 | 浏览器端运行         |
| **微信小程序**    | ✅ 完全支持 | 微信生态内运行       |
| **支付宝小程序**  | ✅ 完全支持 | 支付宝生态内运行     |
| **App (Android)** | ✅ 完全支持 | 原生 Android 应用    |
| **App (iOS)**     | ✅ 完全支持 | 原生 iOS 应用        |
| **快应用**        | ⚠️ 基础支持 | 部分功能可能需要适配 |

## 🤝 贡献指南

### 📝 开发规范

1. **代码风格**: 遵循 Vue 3 + uni-app 官方规范
2. **命名规范**:
   - 文件名: 使用 PascalCase (如: `TicketDetails.vue`)
   - 变量名: 使用 camelCase (如: `ticketInfo`)
   - 常量名: 使用 UPPER_CASE (如: `API_BASE_URL`)
3. **注释规范**: 重要函数和复杂逻辑必须添加注释
4. **提交规范**: 使用语义化的 commit message

### 🔄 开发流程

1. Fork 项目到个人仓库
2. 创建功能分支: `git checkout -b feature/新功能名称`
3. 提交代码: `git commit -m "feat: 添加新功能"`
4. 推送分支: `git push origin feature/新功能名称`
5. 创建 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

**作者：甘大鹏 © 版权所有，侵权必究！**

## 📞 联系方式

- **项目作者**: 甘大鹏
- **邮箱**: 2507067216@qq.com
- **GitHub**: [[GitHub 地址]](https://github.com/Gxiaoxin2024/OwOticket.git)

---

<div align="center">

**⭐ 如果这个项目对你有帮助，请给它一个星标！**

_Made with ❤️ by 甘大鹏_

</div>
